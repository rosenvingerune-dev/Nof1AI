============================= test session starts =============================
platform win32 -- Python 3.10.11, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Rune\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Rune\PycharmProjects\Nof1\nof1.ai-alpha-arena-nof1.ai-alpha-arena
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 56 items

scripts/test_ws.py::test_ws FAILED                                       [  1%]
tests/api/test_routes.py::test_read_root PASSED                          [  3%]
tests/api/test_routes.py::test_start_bot PASSED                          [  5%]
tests/api/test_routes.py::test_stop_bot PASSED                           [  7%]
tests/api/test_routes.py::test_get_positions PASSED                      [  8%]
tests/api/test_routes.py::test_close_position PASSED                     [ 10%]
tests/api/test_routes.py::test_get_trades PASSED                         [ 12%]
tests/api/test_routes.py::test_refresh_market_data PASSED                [ 14%]
tests/api/test_routes.py::test_get_settings PASSED                       [ 16%]
tests/api/test_routes.py::test_update_settings PASSED                    [ 17%]
tests/api/test_websocket.py::test_websocket_connection PASSED            [ 19%]
tests/api/test_websocket.py::test_connection_manager_subscriptions PASSED [ 21%]
tests/performance/test_endurance.py::TestEndurance::test_stability_simulation PASSED [ 23%]
tests/test_01_environment.py::test_env_loaded PASSED                     [ 25%]
tests/test_01_environment.py::test_gemini_config PASSED                  [ 26%]
tests/test_01_environment.py::test_openrouter_config PASSED              [ 28%]
tests/test_01_environment.py::test_hyperliquid_config PASSED             [ 30%]
tests/test_01_environment.py::test_trading_config PASSED                 [ 32%]
tests/test_01_environment.py::test_optional_config PASSED                [ 33%]
tests/test_02_gemini_api.py::test_gemini_import PASSED                   [ 35%]
tests/test_02_gemini_api.py::test_gemini_configuration PASSED            [ 37%]
tests/test_02_gemini_api.py::test_gemini_authentication PASSED           [ 39%]
tests/test_02_gemini_api.py::test_simple_generation PASSED               [ 41%]
tests/test_02_gemini_api.py::test_json_mode PASSED                       [ 42%]
tests/test_02_gemini_api.py::test_function_calling PASSED                [ 44%]
tests/test_03_hyperliquid_api.py::test_hyperliquid_import PASSED         [ 46%]
tests/test_03_hyperliquid_api.py::test_api_initialization PASSED         [ 48%]
tests/test_03_hyperliquid_api.py::test_get_user_state PASSED             [ 50%]
tests/test_03_hyperliquid_api.py::test_get_current_price PASSED          [ 51%]
tests/test_03_hyperliquid_api.py::test_get_funding_rate PASSED           [ 53%]
tests/test_03_hyperliquid_api.py::test_get_open_interest PASSED          [ 55%]
tests/test_03_hyperliquid_api.py::test_get_open_orders PASSED            [ 57%]
tests/test_04_gemini_trading_agent.py::test_agent_import PASSED          [ 58%]
tests/test_04_gemini_trading_agent.py::test_agent_initialization PASSED  [ 60%]
tests/test_04_gemini_trading_agent.py::test_simple_trading_decision PASSED [ 62%]
tests/test_04_gemini_trading_agent.py::test_tool_calling_decision PASSED [ 64%]
tests/test_04_gemini_trading_agent.py::test_multi_asset_decision PASSED  [ 66%]
tests/test_04_gemini_trading_agent.py::test_error_handling PASSED        [ 67%]
tests/test_05_paper_trading.py::test_paper_trading PASSED                [ 69%]
tests/test_cache_manager.py::TestCacheManager::test_singleton PASSED     [ 71%]
tests/test_cache_manager.py::TestCacheManager::test_set_get PASSED       [ 73%]
tests/test_cache_manager.py::TestCacheManager::test_ttl_expiration PASSED [ 75%]
tests/test_cache_manager.py::TestCacheManager::test_invalidation PASSED  [ 76%]
tests/test_cache_manager.py::TestCacheManager::test_stats PASSED         [ 78%]
tests/test_event_bus.py::TestEventBus::test_singleton_pattern PASSED     [ 80%]
tests/test_event_bus.py::TestEventBus::test_subscribe_and_publish_sync PASSED [ 82%]
tests/test_event_bus.py::TestEventBus::test_subscribe_and_publish_async PASSED [ 83%]
tests/test_event_bus.py::TestEventBus::test_multiple_subscribers PASSED  [ 85%]
tests/test_event_bus.py::TestEventBus::test_unsubscribe PASSED           [ 87%]
tests/test_event_bus.py::TestEventBus::test_event_history PASSED         [ 89%]
tests/test_event_bus.py::TestEventBus::test_statistics PASSED            [ 91%]
tests/test_event_bus.py::TestEventBus::test_error_handling PASSED        [ 92%]
tests/test_event_bus.py::TestEventBus::test_async_callback_with_delay PASSED [ 94%]
tests/test_event_bus.py::TestEventBus::test_clear_history PASSED         [ 96%]
tests/test_event_bus.py::TestEventBus::test_event_types_constants PASSED [ 98%]
tests/test_event_bus.py::TestEventBus::test_high_volume_events PASSED    [100%]

================================== FAILURES ===================================
___________________________________ test_ws ___________________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
============================== warnings summary ===============================
tests/api/test_routes.py::test_update_settings
  C:\Users\Rune\PycharmProjects\Nof1\nof1.ai-alpha-arena-nof1.ai-alpha-arena\src\api\routes\settings.py:27: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    update_data = settings.dict(exclude_unset=True)

tests/test_01_environment.py::test_env_loaded
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_env_loaded returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_01_environment.py::test_gemini_config
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_gemini_config returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_01_environment.py::test_openrouter_config
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_openrouter_config returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_01_environment.py::test_hyperliquid_config
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_hyperliquid_config returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_01_environment.py::test_trading_config
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_trading_config returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_01_environment.py::test_optional_config
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_01_environment.py::test_optional_config returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_gemini_import
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\google\api_core\_python_version_support.py:266: FutureWarning: You are using a Python version (3.10.11) which Google will stop supporting in new releases of google.api_core once it reaches its end of life (2026-10-04). Please upgrade to the latest Python version, or at least Python 3.11, to continue receiving updates for google.api_core past that date.
    warnings.warn(message, FutureWarning)

tests/test_02_gemini_api.py::test_gemini_import
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_gemini_import returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_gemini_configuration
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_gemini_configuration returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_gemini_authentication
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_gemini_authentication returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_simple_generation
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_simple_generation returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_json_mode
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_json_mode returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_02_gemini_api.py::test_function_calling
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_02_gemini_api.py::test_function_calling returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_03_hyperliquid_api.py::test_hyperliquid_import
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_03_hyperliquid_api.py::test_hyperliquid_import returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_agent_import
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_04_gemini_trading_agent.py::test_agent_import returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_agent_initialization
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_04_gemini_trading_agent.py::test_agent_initialization returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_simple_trading_decision
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_04_gemini_trading_agent.py::test_simple_trading_decision returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_tool_calling_decision
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_04_gemini_trading_agent.py::test_tool_calling_decision returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_multi_asset_decision
  C:\Users\Rune\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_04_gemini_trading_agent.py::test_multi_asset_decision returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_04_gemini_trading_agent.py::test_error_handling
